<form class="{{cssClass}} age-system sheet spaceship" autocomplete="off">

    <input name="name" class="vehicle-name colorset-first-tier" type="text" value="{{actor.name}}" placeholder="{{localize "age-system.item.name"}}"/>
    <div class="sheet-body colorset-second-tier">
        <div class="stats-block systems">
            <h3>{{localize "age-system.spaceship.systems"}}</h3>
            <ul class="systems-list">
                <datalist id="{{this.actor.data.type}}-{{this.actor._id}}-list">
                    <option value=""></option>
                    {{#each config.focus as |focus|}}
                    <option value="{{focus.name}}"></option>
                    {{/each}}
                </datalist>
                <li class="flexrow">
                    <p class="system-roll"></p>
                    <p class="system-role">{{localize "age-system.spaceship.role"}}</p>
                    <p class="system-operator">{{localize "age-system.spaceship.op"}}</p>
                    <p class="system-abl">{{localize "age-system.abl"}}</p>
                    <p class="system-focus">{{localize "age-system.focus"}}</p>
                </li>
                {{#each data.systems as |system sysName|}}
                <li class="feature-controls {{sysName}} flexrow">
                    <a class="system-roll"><i class="fas fa-dice"></i></a>
                    <p class="system-role">{{localize (concat "age-system.spaceship.operator." sysName)}}</p>
                    <select name="data.systems.{{sysName}}.operator" class="system-operator">
                        {{#select system.operator}}
                        <option value="crew">{{localize "age-system.spaceship.crew"}}</option>
                        {{#each ../passengers as |passenger|}}
                        <option value="{{passenger.id}}">{{passenger.name}}</option>
                        {{/each}}
                        {{/select}}
                    </select>
                    <select name="data.systems.{{sysName}}.useAbl" class="system-abl">
                        {{#select system.useAbl}}
                        {{#each config.abilities as |name type|}}
                        <option value="{{type}}">{{localize name}}</option>
                        {{/each}}
                        {{/select}}
                    </select>
                    <input name="data.systems.{{sysName}}.useFocus" class="system-focus" type="text" value="{{system.useFocus}}" placeholder="Focus Name" list="{{../this.actor.data.type}}-{{../this.actor._id}}-list"/>
                </li>
                {{/each}}
            </ul>
        </div>
        <hr>
        <div class="stats-block parameters flexrow">
            
            <div class="parameters container">
                {{!-- TODO - TRANSFORMAR EM HULL --}}
                <div class="flexrow flex-align-center hull">
                    <label class="parameter-label">{{localize "age-system.spaceship.hull"}}</label>
                    <input class="hull-dice-qtd" type="number" name="data.hull.nrDice" value="{{data.hull.nrDice}}" data-dtype="Number" />
                    <select class="hull-dice-type" name="data.hull.diceType" class="dice-size">
                        {{#select data.hull.diceType}}
                        <option value="6">{{localize "age-system.settings.d6"}}</option>
                        <option value="3">{{localize "age-system.settings.d3"}}</option>
                        {{/select}}
                    </select>
                    <span class="hull-plus-sign">{{localize "age-system.settings.plusSign"}}</span>
                    <input class="hull-extra-damage" type="number" name="data.hull.extraValue" value="{{data.hull.extraValue}}" data-dtype="Number" />
                </div>
                <div class="flexrow flex-align-center size">
                    <label class="parameter-label">{{localize "age-system.spaceship.size"}}</label>
                    <select class="ship-size" name="data.size" class="dice-size">
                        {{#select data.size}}
                        {{#each config.shipSize as |size sizeKey|}}
                        <option value="{{size}}">{{localize (concat "age-system.spaceship.sizeType." sizeKey)}}</option>
                        {{/each}}
                        {{/select}}
                    </select>
                </div>
                <div class="flexrow flex-align-center crew">
                    <label class="parameter-label">{{localize "age-system.spaceship.crew"}}</label>
                    <div class="flexcol">
                        <div class="flexcol crew-competece">
                            <label class="competence-label">{{localize "age-system.spaceship.competence"}}</label>
                            <select class="competence-lsit" name="data.crew.competence">
                                {{#select data.crew.competence}}
                                {{#each config.crewCompetence as |compet competKey|}}
                                <option value="{{compet}}">{{localize (concat "age-system.spaceship.competenceLevel." compttKey)}} (+{{compet}})</option>
                                {{/each}}
                                {{/select}}
                            </select>
                        </div>
                        <div class="crew-details flexrow">
                            <label>{{localize "age-system.spaceship.crewCur"}}</label>
                            <input class="" type="number" name="data.crew.current" value="{{data.crew.current}}" data-dtype="Number" />
                            <label>{{localize "age-system.spaceship.crewMin"}}</label>
                            <input class="" type="number" name="data.crew.min" value="{{data.crew.min}}" data-dtype="Number" />
                            <label>{{localize "age-system.spaceship.crewTyp"}}</label>
                            <span style="background: rgba(0, 0, 0, 0.05);" role="textbox" contenteditable name="data.crew.typical" value="{{data.crew.typical}}" data-dtype="Number">{{data.crew.typical}}</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="passenger container">
                <label class="flexrow flex-align-center">{{localize "age-system.passengers"}} [{{data.pob}}]</label>
                <ul class="passenger-list">
                    {{#each passengers as |passenger|}}
                    <li class="flexrow feature-controls" data-passenger-key="{{@key}}">
                        <a class="flex-align-end passenger-remove"><i class="fa fa-times"></i></a>
                        <img src="{{passenger.picture}}" class="passenger-token">
                        <a class="passenger-damage-control" title="{{localize "age-system.damageControl"}}"><i class="fas fa-cogs"></i></a>
                        <div class="flexrow flex-justify-start flex-align-center passenger-name">
                            <span>{{passenger.name}}</span>
                            {{#if passenger.isCaptain}}<span>({{localize "age-system.spaceship.operator.command"}})</span>{{/if}}
                            {{#if passenger.isPilot}}<span>({{localize "age-system.spaceship.operator.maneuver"}})</span>{{/if}}
                            {{#if passenger.isSensorOp}}<span>({{localize "age-system.spacehsip.operator.sensors"}})</span>{{/if}}
                        </div>
                    </li>
                    {{/each}}
                </ul>
            </div>
        </div>
        <hr>
        <div class="stats-block losses">

        </div>    
    </div>
</form>
